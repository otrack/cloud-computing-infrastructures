apiVersion: v1
kind: Pod
metadata:
  name: cassandra-%ID%
  labels:
    app: "cassandra"
    id: "%ID%"
spec:
  restartPolicy: Always
  containers:
  - name: cassandra
    image: cassandra:4.1
    imagePullPolicy: IfNotPresent
    resources:
      requests:
        cpu: 0.25
        memory: 2Gi
      limits:
        cpu: 1
        memory: 4Gi
    ports:
    - containerPort: 9042
      name: cql
    - containerPort: 7000
      name: intra-node
    - containerPort: 7001
      name: tls-intra-node
    - containerPort: 7199
      name: jmx
    env:
    - name: CASSANDRA_SEEDS
      value: "cassandra.default.svc.cluster.local"
    - name: CASSANDRA_CLUSTER_NAME
      value: "BankingCluster"
    - name: CASSANDRA_DC
      value: "datacenter1"
    - name: CASSANDRA_RACK
      value: "rack1"
    - name: CASSANDRA_ENDPOINT_SNITCH
      value: "GossipingPropertyFileSnitch"
